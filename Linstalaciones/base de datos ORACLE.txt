CREATE TABLE cliente (
    id              INTEGER NOT NULL,
    rut_cliente     VARCHAR2(15) NOT NULL,
    nombre          VARCHAR2(50) NOT NULL,
    apellido        VARCHAR2(50) NOT NULL,
    correo          VARCHAR2(80) NOT NULL,
    direccion       VARCHAR2(80),
    telefono        VARCHAR2(20),
    numero_tarjeta  NUMBER(10) NOT NULL
);

ALTER TABLE cliente ADD CONSTRAINT cliente_pk PRIMARY KEY ( id );

CREATE TABLE tecnico (
    id              INTEGER NOT NULL,
    rut_tecnico  VARCHAR2(15) NOT NULL,
    nombre       VARCHAR2(50) NOT NULL,
    apellido     VARCHAR2(50) NOT NULL,
    correo       VARCHAR2(80) NOT NULL,
    direccion    VARCHAR2(80) NOT NULL,
    telefono     VARCHAR2(20) NOT NULL
);

ALTER TABLE tecnico ADD CONSTRAINT tecnico_pk PRIMARY KEY ( id );

CREATE TABLE materiales (
    id                      INTEGER NOT NULL,
    acetona                 NUMBER(10) NOT NULL,
    agua_destilada          NUMBER(10) NOT NULL,
    aguja_de_tablero        NUMBER(10) NOT NULL,
    alcohol                 NUMBER(10) NOT NULL,
    brocha_2cm              NUMBER(10) NOT NULL,
    brocha_4cm              NUMBER(10) NOT NULL,
    cera_virgen             NUMBER(10) NOT NULL,
    cuter                   NUMBER(10) NOT NULL,
    franela                 NUMBER(10) NOT NULL,
    gasolina_blanca         NUMBER(10) NOT NULL,
    goma_dura               NUMBER(10) NOT NULL,
    goma_suave              NUMBER(10) NOT NULL,
    hilo_canamo             NUMBER(10) NOT NULL,
    hisopos_algodon         NUMBER(10) NOT NULL,
    keratol                 NUMBER(10) NOT NULL,
    lija_801_madera         NUMBER(10) NOT NULL,
    papel_japones           NUMBER(10) NOT NULL,
    papel_secante           NUMBER(10) NOT NULL,
    papel_minagris          NUMBER(10) NOT NULL,
    pegamento_unidor        NUMBER(10) NOT NULL,
    periodico               NUMBER(10) NOT NULL,
    plegadera_hueso_madera  NUMBER(10) NOT NULL,
    tecnico_id              INTEGER NOT NULL
);

ALTER TABLE materiales ADD CONSTRAINT materiales_pk PRIMARY KEY ( id );

CREATE TABLE empleado (
     id                      INTEGER NOT NULL,
    rut_empleado  VARCHAR2(15) NOT NULL,
    nombre        VARCHAR2(50) NOT NULL,
    apellido      VARCHAR2(50) NOT NULL,
    correo        VARCHAR2(80) NOT NULL,
    direccion     VARCHAR2(80) NOT NULL,
    telefono      VARCHAR2(20) NOT NULL,
    cargo         VARCHAR2(50) NOT NULL,
    departamento  VARCHAR2(50) NOT NULL
);

ALTER TABLE empleado ADD CONSTRAINT empleado_pk PRIMARY KEY ( id );

CREATE TABLE tipo (
    id           INTEGER NOT NULL,
    tipo         VARCHAR2(40) NOT NULL
    
);

ALTER TABLE tipo ADD CONSTRAINT tipo_pk PRIMARY KEY ( id );


CREATE TABLE servicio (
    id         INTEGER NOT NULL,
    fecha_servicio      DATE NOT NULL,
    direccion_servicio  VARCHAR2(80) NOT NULL,
    detalle_servicio    VARCHAR2(150) NOT NULL,
     cliente_id           INTEGER NOT NULL,
     tecnico_id           INTEGER NOT NULL,
	tipo_id            INTEGER NOT NULL
);

ALTER TABLE servicio ADD CONSTRAINT servicio_pk PRIMARY KEY ( id );



CREATE TABLE venta (
    id      INTEGER NOT NULL,
    fecha_venta   DATE NOT NULL,
     cliente_id                      INTEGER NOT NULL,
     empleado_id                      INTEGER NOT NULL
);

ALTER TABLE venta ADD CONSTRAINT venta_pk PRIMARY KEY ( id );

CREATE TABLE pago (
    id         INTEGER NOT NULL,
    total      NUMBER(10) NOT NULL,
    venta_id   INTEGER NOT NULL
);
ALTER TABLE pago ADD CONSTRAINT pago_pk PRIMARY KEY ( id );

CREATE UNIQUE INDEX pago__idx ON
    pago (
        venta_id
    ASC );

CREATE TABLE libro (
    id   INTEGER NOT NULL,
    nombre     VARCHAR2(50) NOT NULL,
    autor      VARCHAR2(50) NOT NULL,
    editorial  VARCHAR2(50) NOT NULL,
    precio     NUMBER(10) NOT NULL,
    stock      NUMBER(10) NOT NULL,
    proveedor  VARCHAR2(50) NOT NULL
);

ALTER TABLE libro ADD CONSTRAINT libro_pk PRIMARY KEY ( id );

CREATE TABLE carrito (
    id        INTEGER NOT NULL,
    libro_id  INTEGER NOT NULL,
    cantidad  NUMBER(10) NOT NULL
);

ALTER TABLE carrito ADD CONSTRAINT carrito_pk PRIMARY KEY ( id );

CREATE TABLE detalle_venta (
	id  INTEGER NOT NULL,
    venta_venta_id  INTEGER NOT NULL,
    venta_libro_id  INTEGER NOT NULL
);

ALTER TABLE detalle_venta ADD CONSTRAINT detalle_pk PRIMARY KEY ( id);




ALTER TABLE carrito
    ADD CONSTRAINT carrito_libro_fk FOREIGN KEY ( libro_id )
        REFERENCES libro ( id );

ALTER TABLE pago
    ADD CONSTRAINT pago_venta_fk FOREIGN KEY ( venta_id )
        REFERENCES venta ( id );

ALTER TABLE servicio
    ADD CONSTRAINT servicio_cliente_fk FOREIGN KEY ( cliente_id )
        REFERENCES cliente ( id );

ALTER TABLE servicio
    ADD CONSTRAINT servicio_tecnico_fk FOREIGN KEY ( tecnico_id )
        REFERENCES tecnico ( id );

ALTER TABLE servicio
    ADD CONSTRAINT servicio_tipo_fk FOREIGN KEY ( tipo_id )
        REFERENCES tipo ( id );

ALTER TABLE venta
    ADD CONSTRAINT venta_cliente_fk FOREIGN KEY ( cliente_id )
        REFERENCES cliente ( id );

ALTER TABLE venta
    ADD CONSTRAINT venta_empleado_fk FOREIGN KEY ( empleado_id )
        REFERENCES empleado ( id );

ALTER TABLE detalle_venta
    ADD CONSTRAINT venta_fk FOREIGN KEY ( venta_venta_id )
        REFERENCES venta ( id );

ALTER TABLE detalle_venta
    ADD CONSTRAINT venta_libro_fk FOREIGN KEY ( venta_libro_id )
        REFERENCES libro ( id );

ALTER TABLE materiales
    ADD CONSTRAINT materiales_tecnico_fk FOREIGN KEY ( tecnico_id )
        REFERENCES tecnico ( id );
